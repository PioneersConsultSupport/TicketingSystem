<div class="admin-container p-4">
  <!-- Admin Form Card -->
  <mat-card class="admin-form-card mat-elevation-z6 mb-8">
    <mat-card-header>
      <div class="header-flex flex items-center gap-3">
        <mat-icon color="primary">admin_panel_settings</mat-icon>
        <mat-card-title>{{ "admin_panel" | translate }}</mat-card-title>
      </div>
    </mat-card-header>

    <mat-card-content>
      <form
        [formGroup]="adminForm"
        (ngSubmit)="onSubmit()"
        class="admin-form grid grid-cols-1 md:grid-cols-2 gap-6"
      >
        <!-- User Select -->
        <mat-form-field appearance="outline">
          <mat-label>{{ "select_user" | translate }}</mat-label>
          <mat-select formControlName="userEmail">
            <mat-option *ngFor="let user of users" [value]="user.mail">{{
              user.displayName
            }}</mat-option>
          </mat-select>
        </mat-form-field>

        <!-- Role Select -->
        <mat-form-field appearance="outline">
          <mat-label>{{ "assign_role" | translate }}</mat-label>
          <mat-select formControlName="userRoleId">
            <mat-option *ngFor="let role of roles" [value]="role.value">{{
              role.key | translate
            }}</mat-option>
          </mat-select>
        </mat-form-field>

        <!-- Submit Button -->
        <div class="md:col-span-2 flex justify-end">
          <button
            type="submit"
            mat-flat-button
            color="primary"
            class="save-button"
          >
            <mat-icon class="mr-2">save</mat-icon> {{ "save_Role" | translate }}
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>

  <!-- User Roles Table Card -->
  <mat-card class="admin-table-card mat-elevation-z6">
    <mat-card-header>
      <div class="header-flex flex items-center gap-3">
        <mat-icon color="primary">group</mat-icon>
        <mat-card-title>{{ "assigned_roles" | translate }}</mat-card-title>
      </div>
    </mat-card-header>

    <mat-card-content>
      <div class="overflow-x-auto">
        <table
          mat-table
          [dataSource]="dataSource"
          matSort
          class="w-full min-w-[600px] rounded-lg overflow-hidden border border-gray-200"
        >
          <!-- User Name -->
          <ng-container matColumnDef="userName">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="bg-blue-50 px-4 py-3 font-semibold text-blue-800"
            >
              {{ "user_name" | translate }}
            </th>
            <td mat-cell *matCellDef="let detail" class="px-4 py-3">
              {{ detail.userName }}
            </td>
          </ng-container>

          <!-- User Email -->
          <ng-container matColumnDef="userEmail">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="bg-blue-50 px-4 py-3 font-semibold text-blue-800"
            >
              {{ "user_email" | translate }}
            </th>
            <td mat-cell *matCellDef="let detail" class="px-4 py-3">
              {{ detail.userEmail }}
            </td>
          </ng-container>

          <!-- Role -->
          <ng-container matColumnDef="userRoleId">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="bg-blue-50 px-4 py-3 font-semibold text-blue-800"
            >
              {{ "user_Role" | translate }}
            </th>
            <td mat-cell *matCellDef="let detail" class="px-4 py-3">
              <span class="role-badge">{{
                objectEnum[detail.userRoleId] | translate
              }}</span>
            </td>
          </ng-container>

          <!-- Edit -->
          <ng-container matColumnDef="edit">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="bg-blue-50 px-4 py-3 text-center"
            ></th>
            <td mat-cell *matCellDef="let detail" class="text-center">
              <button
                mat-icon-button
                color="primary"
                matTooltip="Edit"
                (click)="edit(detail)"
              >
                <mat-icon>edit</mat-icon>
              </button>
            </td>
          </ng-container>

          <!-- Delete -->
          <ng-container matColumnDef="delete">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="bg-blue-50 px-4 py-3 text-center"
            ></th>
            <td mat-cell *matCellDef="let detail" class="text-center">
              <button
                mat-icon-button
                color="warn"
                matTooltip="Delete"
                (click)="deleteRole(detail)"
              >
                <mat-icon>delete</mat-icon>
              </button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
      </div>
    </mat-card-content>

    <mat-card-actions>
      <mat-paginator
        [pageSizeOptions]="[5, 10, 25]"
        showFirstLastButtons
      ></mat-paginator>
    </mat-card-actions>
  </mat-card>
</div>
